---
title: The OpenStreetMap data model
---

OpenStreetMapにおいて、それぞれの地物は1つ以上のジオメトリ（位置情報。例えば、河川の形状そのものを思い浮かべてください）と、そこに付属する属性データ（例えば、河川の名称など）を保有しています。ジオメトリは3つの異なる *要素* で記述されます。*ノード/node*、*ウェイ/way*そして*リレーション/relation*です。属性は*タグ*として記述され、ノードやウェイ、リレーションの一部となることができます。

ノードはポイント/pointとも呼ばれ、ウェイはライン/lineと同様ノードが接続されたもの、リレーションはノードやウェイの集合体でより大きな地物全体を表現するために使われます。実際に例を見てみるのがわかりやすいでしょう。

## ノード

ノードは、ポイント形状を持つあらゆる地物や、その地点のPOIの名前を指定するために使われます。以下のノードは、喫茶店を表しています。

![node-example1]({{site.baseurl}}/images/node-example1.png)

以下はニューヨーク市を表している例です。
    
![node-example-2]({{site.baseurl}}/images/node-example-2.png)

## ウェイ

ウェイは *2つ以上のノードが接続された* 線状の地物 - 例えば道路を表すために使われます。

![way-example-1]({{site.baseurl}}/images/way-example-1.png)

ウェイを始点と終点で閉じた場合、建物などのエリアを表すことが可能です。
 
![way-example-2]({{site.baseurl}}/images/way-example-2.png)

以下は公園の例です
 
![way-example-3]({{site.baseurl}}/images/way-example-3.png)

ノードは通常、ウェイの一部を構成するための構成要素として使われます。しかし、ウェイの中に組み込まれたノードそれ自体が何らかの意味合いを持つことも可能です。この例では、ノードは14thストリートとRストリートの一部であり、なおかつこの場所に信号機があることも意味しています。

![way-example-4]({{site.baseurl}}/images/way-example-4.gif)

## タグ

ノード、ウェイに続いてリレーションという3つめの要素の解説を行う前に、タグについて解説します。これまでに出てきた喫茶店の例などを見てみましょう。

![osm-tag]({{site.baseurl}}/images/osm-tag.png)

ポイント形状の地物はノードと呼ばれます。喫茶店や学校、消火栓、木、公園、山頂などノードが表現できる地物は様々であり、どのようなタグを付与するかによってその内容は変わってきます。ライン形状の地物はすべてウェイと呼ばれます。道路や建物、湖沼、線路、自転車道など、そのウェイが何を表現するかはタグによって変わってきます。

タグは、ノード、ウェイ、リレーションといったすべての要素に付与することができます。

## リレーション

リレーションは複数のノードやウェイの集合体であり、大きな地物全体を表現するために使われます。例として、3つの異なるウェイから成立する、バス経路23系統を見てみましょう。

![relations]({{site.baseurl}}/images/relations.gif)

編集中にもっともよく見かけるリレーションは、穴の開いたエリアを表現するために使われる *マルチポリゴン/multipolygon*と呼ばれるリレーションと思われます。以下は中庭を持ったマルチポリゴンの建物の例です。この例では、複数のノードを持ったウェイが2つ使われています。1つのウェイは*外側/outer*の建物の壁を表し、もうひとつは*内側/inner*の壁を表現しています。2つのウェイは`type=multipolygon`というタイプのリレーションの一部で、外側のウェイは `outer`のロール、内側のウェイは `inner`のロールを割り当てられています。注意：`building=yes`のタグは、リレーションに対して付与されています（ウェイではありません）。

現在利用可能なOpenStreetMapエディタの多くはマルチポリゴンの作成機能を持っていますので、内容を濃く感じても心配する必要はありません。マルチポリゴンを編集することになった場合、またもう一度この文章を読み直してみてください。

![multipolygon]({{site.baseurl}}/images/multipolygon.gif)

## 参考文献

OpenStreetMapのデータ構造についてより詳しい解説は以下の資料を参照してください。

- OpenStreetMap Elements http://wiki.openstreetmap.org/wiki/Elements
- Multipolygons http://wiki.openstreetmap.org/wiki/Relation:multipolygon